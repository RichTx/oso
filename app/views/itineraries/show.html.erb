<% title(@itinerary.name, "Itineraries") %>

<section>
    <h1><%= @itinerary.name %></h1>
    <%= link_to "Add a flight", new_itinerary_flight_path(@itinerary), :class => 'btn btn-mini btn-primary' %>&nbsp;
    <%= link_to "Edit Itinerary Name", edit_itinerary_path(@itinerary), :class => 'btn btn-mini btn-primary' %>&nbsp;
    <%= link_to "Delete Itinerary",
        itinerary_path(@itinerary),
        :class => 'btn btn-mini btn-danger',
        :method => :delete,
        :confirm => "Are you sure you want to delete this itinerary?" %>
    <table class='table table-hover' id="itinerary_details">
        <thead><th>Airline Code</th><th>Flight Number</th>
            <th>Scheduled Departure Time</th><th>Departure Airport</th>
            <th>Arrival Airport</th><th>Flight Status</th>
        </thead>
        <tbody>
            <% @itinerary.flights.each do |flight| %>
            <tr>
                <td><%= flight.airline_code %></td>
                <td><%= flight.flight_number %></td>
                <td><%= flight.scheduled_departure_time.strftime("%b %-d %Y") %></td>
                <td><%= flight.departure_airport %></td>
                <td><%= flight.arrival_airport %></td>
                <td><%= flight.status %></td>
            </tr>
            <tr>
                <td class="flight_id_<%= flight.id.to_s %>" colspan="6">
                <%= link_to "View Details and Alternatives", itinerary_flight_path(@itinerary, flight), :class => "btn btn-mini btn-primary" %>&nbsp;
                <%= link_to "Edit flight", edit_itinerary_flight_path(@itinerary, flight), :class => "btn btn-mini btn-primary" %>&nbsp;
                <%= link_to "Delete flight", itinerary_flight_path(@itinerary, flight),
                            :class => "btn btn-mini btn-danger",
                            :method => :delete,
                            :confirm => "Are you sure you want to delete this flight?" %>
                </td>
            </tr>
          <% end %>
        </tbody>
    </table>
</section>
